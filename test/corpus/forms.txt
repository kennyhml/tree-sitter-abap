======
Simple form definition
======
FORM foo.
ENDFORM.
---

(source
  (form_definition
    (keyword_form)
    name: (identifier)
    (keyword_endform)))

======
Form with using/changing parameters
======
FORM fill_table USING    wa   TYPE any
                CHANGING ptab TYPE INDEX TABLE. 
ENDFORM.
---

(source
  (form_definition
    (keyword_form)
    name: (identifier)
    (keyword_using)
    using: (parameter_list
      (parameter
        (simple_param_spec
          name: (identifier))
        typing: (referred_type_spec
          (keyword_type)
          name: (type_identifier))))
    (keyword_changing)
    changing: (parameter_list
      (parameter
        (simple_param_spec
          name: (identifier))
        typing: (table_type_spec
          (keyword_type)
          kind: (keyword_index)
          (keyword_table))))
    (keyword_endform)))

======
Form with structure parameter
======
FORM legacy_subroutine 
  TABLES   t_data STRUCTURE kna1.
ENDFORM.
---

(source
  (form_definition
    (keyword_form)
    name: (identifier)
    (keyword_tables)
    tables: (parameter_list
      (parameter
        (simple_param_spec
          name: (identifier))
        (structure_param_spec
          (keyword_structure)
          name: (identifier))))
    (keyword_endform)))

======
Form with class-based exceptions
======
FORM process_data
  USING    value(it_list) TYPE standard table
  RAISING  cx_abap_invalid_value
           RESUMABLE(cx_demo_exception).
ENDFORM.
---

(source
  (form_definition
    (keyword_form)
    name: (identifier)
    (keyword_using)
    using: (parameter_list
      (parameter
        (value_param_spec
          (keyword_value)
          name: (identifier))
        typing: (table_type_spec
          (keyword_type)
          kind: (keyword_standard)
          (keyword_table))))
    (keyword_raising)
    raising: (raising_list
      (simple_exception_spec
        name: (identifier))
      (resumable_exception_spec
        (keyword_resumable)
        name: (identifier)))
    (keyword_endform)))

======
Perform subroutine
======
PERFORM select_sflight TABLES sflight_tab 
                       USING  p_carr p_conn. 
---

(source
  (perform_statement
    (keyword_perform)
    (subroutine_spec
      (identifier))
    (keyword_tables)
    (argument_list
      (positional_argument
        (identifier)))
    (keyword_using)
    (argument_list
      (positional_argument
        (identifier))
      (positional_argument
        (identifier)))))

======
Perform subroutine in program
======
PERFORM (subr) IN PROGRAM (prog) IF FOUND. 
---

(source
  (perform_statement
    (keyword_perform)
    routine: (subroutine_spec
      name: (dyn_spec
        name: (identifier))
      (in_program_spec
        (keyword_in)
        (keyword_program)
        name: (dyn_spec
          name: (identifier)))
      (if_found_spec
        (keyword_if)
        (keyword_found)))))

======
Perform subroutine from index
======
PERFORM sy-index OF subr_1 subr_2.
---

(source
  (perform_statement
    (keyword_perform)
    routine: (subroutine_spec
      index: (struct_component_selector
        struct: (identifier)
        comp: (identifier))
      (keyword_of)
      subroutines: (subroutine_list
        (identifier)
        (identifier)))))

======
Perform subroutine in other program short form
======
PERFORM foo(bar) IF FOUND. 
---

(source
  (perform_statement
    (keyword_perform)
    routine: (subroutine_spec
      name: (identifier)
      program: (dyn_spec
        name: (identifier))
      (if_found_spec
        (keyword_if)
        (keyword_found)))))

======
Register subroutines on luw actions
======
PERFORM update_database_logs ON COMMIT level lvl.
PERFORM cleanup_temp_buffers ON ROLLBACK.
---

(source
  (perform_statement
    (keyword_perform)
    routine: (subroutine_spec
      name: (identifier))
    (perform_on_commit_spec
      (keyword_on)
      (keyword_commit)
      commit_level: (commit_level_spec
        (keyword_level)
        level: (identifier))))
  (perform_statement
    (keyword_perform)
    routine: (subroutine_spec
      name: (identifier))
    (perform_on_rollback_spec
      (keyword_on)
      (keyword_rollback))))
