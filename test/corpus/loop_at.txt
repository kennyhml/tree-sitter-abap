======
[LOOP-AT] Simple loop
======
loop at requests into request.
endloop.
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (into_spec
      (keyword_into)
      work_area: (identifier))
    (keyword_endloop)))

======
[LOOP-AT] Loop into reference
======
loop at requests reference into data(request).
endloop.
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (reference_into_spec
      (keyword_reference)
      (keyword_into)
      work_area: (declaration_expression
        (keyword_data)
        name: (identifier)))
    (keyword_endloop)))

======
[LOOP-AT] Loop at with inline declarations
======
LOOP AT VALUE t_itab( ( 1 ) ( 2 ) ( 3 ) ) ASSIGNING FIELD-SYMBOL(<fs>). 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (value_expression
      (keyword_value)
      type: (type_identifier)
      (itab_expression
        (line_spec
          value: (argument_list
            (positional_argument
              value: (number))))
        (line_spec
          value: (argument_list
            (positional_argument
              value: (number))))
        (line_spec
          value: (argument_list
            (positional_argument
              value: (number))))))
    result: (assigning_spec
      (keyword_assigning)
      work_area: (declaration_expression
        (keyword_field_symbol)
        name: (identifier)))
    (keyword_endloop)))

======
[LOOP-AT] Nested loop at
======
LOOP AT scarr_tab ASSIGNING FIELD-SYMBOL(<scarr_line>) 
                  WHERE carrname CP name. 
  LOOP AT spfli_tab INTO FINAL(spfli_line) 
                    WHERE carrid = <scarr_line>-carrid. 
  ENDLOOP. 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (assigning_spec
      (keyword_assigning)
      work_area: (declaration_expression
        (keyword_field_symbol)
        name: (identifier)))
    condition: (iteration_cond
      (keyword_where)
      (comparison_expression
        left: (identifier)
        (keyword_cp)
        right: (identifier)))
    body: (loop_at_body
      (loop_at_statement
        (keyword_loop)
        (keyword_at)
        subject: (identifier)
        result: (into_spec
          (keyword_into)
          work_area: (declaration_expression
            (keyword_final)
            name: (identifier)))
        condition: (iteration_cond
          (keyword_where)
          (comparison_expression
            left: (identifier)
            right: (binary_operator
              left: (field_symbol
                name: (identifier))
              right: (identifier))))
        (keyword_endloop)))
    (keyword_endloop)))

======
[LOOP-AT] Specifying an explicit key
======
LOOP AT itab INTO FINAL(number2) USING KEY key. 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (into_spec
      (keyword_into)
      work_area: (declaration_expression
        (keyword_final)
        name: (identifier)))
    condition: (iteration_cond
      (using_key_spec
        (keyword_using)
        (keyword_key)
        name: (identifier)))
    (keyword_endloop)))

======
[LOOP-AT] Loop from index
======
LOOP AT itab FROM lines( itab ) ASSIGNING FIELD-SYMBOL(<fs>). 
ENDLOOP.
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    from: (iterate_from_index_spec
      (keyword_from)
      index: (builtin_function_call
        name: (identifier)
        (call_argument_list
          exporting: (positional_argument
            value: (identifier)))))
    result: (assigning_spec
      (keyword_assigning)
      work_area: (declaration_expression
        (keyword_field_symbol)
        name: (identifier)))
    (keyword_endloop)))

======
[LOOP-AT] Sliced loop with step
======
LOOP AT itab FROM 3 STEP -1 ASSIGNING FIELD-SYMBOL(<fs>) TO 1. 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    from: (iterate_from_index_spec
      (keyword_from)
      index: (number))
    step: (iterate_step_spec
      (keyword_step)
      size: (number))
    result: (assigning_spec
      (keyword_assigning)
      work_area: (declaration_expression
        (keyword_field_symbol)
        name: (identifier)))
    to: (iterate_to_index_spec
      (keyword_to)
      index: (number))
    (keyword_endloop)))

======
[LOOP-AT] Where condition with dereference
======
LOOP AT itab INTO line FROM 10 TO 25 WHERE col2 > dref->*. 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (into_spec
      (keyword_into)
      work_area: (identifier))
    from: (iterate_from_index_spec
      (keyword_from)
      index: (number))
    to: (iterate_to_index_spec
      (keyword_to)
      index: (number))
    condition: (iteration_cond
      (keyword_where)
      (comparison_expression
        left: (identifier)
        right: (dereference
          dref: (identifier))))
    (keyword_endloop)))

======
[LOOP-AT] Dynamic where condition
======
LOOP AT itab INTO line FROM 10 TO 25 WHERE (cond). 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (into_spec
      (keyword_into)
      work_area: (identifier))
    from: (iterate_from_index_spec
      (keyword_from)
      index: (number))
    to: (iterate_to_index_spec
      (keyword_to)
      index: (number))
    condition: (iteration_cond
      (keyword_where)
      (dynamic_cond
        name: (identifier)))
    (keyword_endloop)))

======
[LOOP-AT] Loop without transporting fields
======
LOOP AT itab TRANSPORTING NO FIELDS WHERE table_line >= 40.  
ENDLOOP.
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (transporting_no_fields_spec
      (keyword_transporting)
      (keyword_no)
      (keyword_fields))
    condition: (iteration_cond
      (keyword_where)
      (comparison_expression
        left: (identifier)
        right: (number)))
    (keyword_endloop)))

======
[LOOP-AT] Group level processing in simple loop
======
LOOP AT itab ASSIGNING FIELD-SYMBOL(<fs>). 
  AT FIRST.
  ENDAT.
  AT NEW comp1.
  ENDAT.
  AT END OF comp1.
  ENDAT.
  AT LAST. 
  ENDAT. 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (assigning_spec
      (keyword_assigning)
      work_area: (declaration_expression
        (keyword_field_symbol)
        name: (identifier)))
    body: (loop_at_body
      (at_first_statement
        (keyword_at)
        (keyword_first)
        (keyword_endat))
      (at_new_statement
        (keyword_at)
        (keyword_new)
        component: (identifier)
        (keyword_endat))
      (at_end_of_statement
        (keyword_at)
        (keyword_end)
        (keyword_of)
        component: (identifier)
        (keyword_endat))
      (at_last_statement
        (keyword_at)
        (keyword_last)
        (keyword_endat)))
    (keyword_endloop)))

======
[LOOP-AT] Group by using group index / size
======
LOOP AT spfli_tab INTO FINAL(wa) 
                  GROUP BY ( key1 = wa-carrid key2 = wa-airpfrom 
                             indx = GROUP INDEX 
                             size = GROUP SIZE ) 
                  INTO data(key). 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (into_spec
      (keyword_into)
      work_area: (declaration_expression
        (keyword_final)
        name: (identifier)))
    grouping: (group_by_spec
      (keyword_group)
      (keyword_by)
      key: (group_key
        (group_key_component_spec
          field: (identifier)
          value: (struct_component_selector
            struct: (identifier)
            comp: (identifier)))
        (group_key_component_spec
          field: (identifier)
          value: (struct_component_selector
            struct: (identifier)
            comp: (identifier)))
        (group_index_assignment
          field: (identifier)
          (keyword_group)
          (keyword_index))
        (group_size_assignment
          field: (identifier)
          (keyword_group)
          (keyword_size)))
      group_result: (into_spec
        (keyword_into)
        work_area: (declaration_expression
          (keyword_data)
          name: (identifier))))
    (keyword_endloop)))

======
[LOOP-AT] Group by using expression key
======
LOOP AT itab ASSIGNING FIELD-SYMBOL(<line>) 
              GROUP BY to_upper( <line> ) ASCENDING 
              ASSIGNING FIELD-SYMBOL(<grp1>). 

ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (assigning_spec
      (keyword_assigning)
      work_area: (declaration_expression
        (keyword_field_symbol)
        name: (identifier)))
    grouping: (group_by_spec
      (keyword_group)
      (keyword_by)
      key: (group_key
        expression: (builtin_function_call
          name: (identifier)
          (call_argument_list
            exporting: (positional_argument
              value: (field_symbol
                name: (identifier))))))
      order: (sort_order_spec
        (keyword_ascending))
      group_result: (assigning_spec
        (keyword_assigning)
        work_area: (declaration_expression
          (keyword_field_symbol)
          name: (identifier))))
    (keyword_endloop)))

======
[LOOP-AT] Loop at group
======
LOOP AT spfli_tab INTO FINAL(wa) 
                  GROUP BY wa-carrid 
                  INTO FINAL(key). 
  LOOP AT GROUP key ASSIGNING FIELD-SYMBOL(<members>) 
                    WHERE cityfrom = 'NEW YORK'. 
  ENDLOOP. 
ENDLOOP. 
---

(source
  (loop_at_statement
    (keyword_loop)
    (keyword_at)
    subject: (identifier)
    result: (into_spec
      (keyword_into)
      work_area: (declaration_expression
        (keyword_final)
        name: (identifier)))
    grouping: (group_by_spec
      (keyword_group)
      (keyword_by)
      key: (group_key
        expression: (struct_component_selector
          struct: (identifier)
          comp: (identifier)))
      group_result: (into_spec
        (keyword_into)
        work_area: (declaration_expression
          (keyword_final)
          name: (identifier))))
    body: (loop_at_body
      (loop_at_group_statement
        (keyword_loop)
        (keyword_at)
        (keyword_group)
        subject: (identifier)
        result: (assigning_spec
          (keyword_assigning)
          work_area: (declaration_expression
            (keyword_field_symbol)
            name: (identifier)))
        condition: (iteration_cond
          (keyword_where)
          (comparison_expression
            left: (identifier)
            right: (string_literal)))
        (keyword_endloop)))
    (keyword_endloop)))
